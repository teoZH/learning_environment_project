
<div class="d-flex" id="dashboard">
    <div class="d-flex flex-column p-1 flex-fill border" style="width:30%;">
        <div class="d-flex border w-100 border-top-0 border-left-0 border-right-0 p-1 m-1 justify-content-around">
            <h3>TO DO</h3>
            <a href="{% url 'create_a_todo' request.user.pk %}" class="btn btn-success" role="button">Add</a>
        </div>
        {% if todos %}
           {% for todo in todos %}
                {% if not todo.in_progress %}
        <div class="container d-flex flex-column p-1 border mb-1 rounded align-items-center">
            <h5>{{ todo }}</h5>
            {% if todo.company %}
            <div class="d-flex">
                <h6>Company: {{ todo.company }}</h6>
                {% if todo.user == request.user %}
                    <small class="ml-2">Assigned to: myself </small>
                {% else %}
                    <small>Assigned to {{ todo.user }} </small>
                {% endif %}
            </div>
            {% else %}
            <h6>Personal Todo</h6>
            {% endif %}
            <div class="btn-group dropleft">
                    <button class="btn-sm btn-info mr-1 dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Show more
                    </button>
                    {% if todo.company and todo.user == request.user %}
                    <button class="btn-sm btn-dark  dropdown-toggle" type="button" data-toggle="collapse" data-target="#num-{{ todo.pk }}" aria-expanded="false" aria-controls="#num-{{ todo.pk }}">
                        Assign to
                    </button>
                    {% endif %}
                <div class="dropdown-menu bg-dark p-1" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item bg-warning" href="{% url 'show_todo' request.user.pk todo.pk %}">Description</a>
                    <a class="dropdown-item bg-success " href="{% url 'start_to_do' request.user.pk todo.pk %}">Start</a>
                    {% if todo.user == request.user %}
                        <a class="dropdown-item bg-danger" href="{% url 'edit_todo' request.user.pk todo.pk %}">Edit</a>
                        <a class="dropdown-item bg-light" href="{% url 'delete_todo' request.user.pk todo.pk %}">Delete </a>
                    {% endif %}
                </div>
            </div>

            <div class="collapse" id="num-{{ todo.pk }}">
                    <form method="post">
                        {% csrf_token %}
                        <div class="d-flex justify-content-between">
                            <div class="form-group">
                                <label for="companies-users">Select an user:</label>
                                <input type="hidden" value="{{ todo.pk }}" name="todo">
                                <select class="form-control" id="companies-users" name="username">
                                    {% for group_name,queryset in groups.items %}
                                        {% if group_name == todo.company.title %}
                                            {% for employee in queryset %}
                                                <option value="{{ employee }}">{{ employee.username }}</option>
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            </div>
                            <button type="submit" class="btn h-50 m-4 btn-danger">Submit</button>
                        </div>
                    </form>
                </div>
        </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    </div>
    <div class="d-flex flex-column p-1 flex-fill border align-items-center" style="width:30%;">
        <div class="d-flex border w-100 border-top-0 border-left-0 border-right-0 p-1 m-1 justify-content-around">
            <h3>IN PROGRESS</h3>
        </div>
        {% if todos %}
           {% for todo in todos %}
                {% if todo.in_progress %}
        <div class="container d-flex flex-column p-1 border mb-1 rounded align-items-center">
            <h5>{{ todo }}</h5>
            {% if todo.company %}
            <div class="d-flex">
                <h6>Company: {{ todo.company }}</h6>
                {% if todo.user == request.user %}
                    <small class="ml-2">Assigned to: myself </small>
                {% else %}
                    <small>Assigned to {{ todo.user }} </small>
                {% endif %}
            </div>
            {% else %}
            <h6>Personal Todo</h6>
            {% endif %}
            <div class="btn-group dropleft">
                    <button class="btn-sm btn-info dropdown-toggle" type="button" id="dropdownMenuButtonSec" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Show more
                    </button>
                <div class="dropdown-menu bg-dark p-1" aria-labelledby="dropdownMenuButtonSec">
                    <a class="dropdown-item bg-warning" href="#">Description</a>
                    <a class="dropdown-item bg-success" href="#">Finish</a>
                    {% if todo.user == request.user %}
                        <a href="{% url 'edit_todo' request.user.pk todo.pk %}" role="button" class="btn btn-lg btn-primary mr-2 rounded">Edit</a>
                        <a class="dropdown-item bg-light" href="{% url 'delete_todo' request.user.pk todo.pk %}">Delete </a>
                    {% endif %}
                </div>
            </div>
        </div>
                {% endif %}
            {% endfor %}
        {% endif %}

    </div>
    <div class="d-flex flex-column p-1 flex-fill border align-items-center" style="width:30%;">
        <div class="d-flex border w-100 border-top-0 border-left-0 border-right-0 p-1 m-1 justify-content-around">
            <h3>DONE</h3>
        </div>

    </div>
</div>




